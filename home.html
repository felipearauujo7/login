<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emprestimos</title>
</head>
<style>
    body {
        font-family: Arial, Helvetica, sans-serif;
        background-image: linear-gradient(90deg, rgb(45, 45, 206), gray);
        background-position: center center;
        color: black;
        margin: 0;
    }

    #buscador {
        margin-top: 5px;
        text-align: center;
    }

    #searchInput {
        border-radius: 10px;
        padding: 5px;
    }

    #botao {
        padding: 4px;
        cursor: pointer;
    }

    table {
        width: 98%;
        margin: auto;
        border-collapse: collapse;
        position: relative;
        background-color: white;
    }

    thead>tr>th {
        position: sticky;
        top: -1px;
        background-color: gray;
    }

    thead,
    tfoot {
        background-color: gray;
    }

    caption {
        font-weight: bolder;
        font-size: 1.3em;
        padding: 10px;
        color: white;
    }

    tbody tr:nth-child(even) {
        background-color: rgba(128, 128, 128, 0.288);
    }

    th {
        background-color: gray;
        height: 40px;
    }

    th,
    td {
        border: 1px solid black;
        padding: 2px;
        text-align: center;
    }

    #container {
        overflow-x: auto;
        max-height: 690px;
        overflow-y: scroll;
    }

    .saida {
        background-color: rgba(255, 0, 0, 0.377);
    }
</style>

<body>
    <div id="container">
        <div id="buscador">
            <input type="text" id="searchInput" placeholder="Buscar por nome">
            <button id="botao" onclick="searchTable()">Buscar</button>
        </div>
        <table>
            <caption>EMPRÉSTIMOS</caption>
            <thead>
                <tr>
                    <th>NOME</th>
                    <th>CAPITAL</th>
                    <th>%</th>
                    <th>JUROS</th>
                    <th>TOTAL</th>
                    <th>DATA</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th>Lara Julianna</th>
                    <td>100.00</td>
                    <td>20%</td>
                    <td>20.00</td>
                    <td class="total">120.00</td>
                    <td>01/10</td>
                </tr>
                <tr>
                    <th>Lara Julianna</th>
                    <td>70.00</td>
                    <td>30%</td>
                    <td>20.00</td>
                    <td class="total">90.00</td>
                    <td>01/10</td>
                </tr>
                <tr>
                    <th>Lucas Brenner</th>
                    <td>200.00</td>
                    <td>20%</td>
                    <td>40.00</td>
                    <td class="total">240.00</td>
                    <td>01/10</td>
                </tr>
                <tr>
                    <th>Lucas Brenner</th>
                    <td>240.00</td>
                    <td>25%</td>
                    <td>60.00</td>
                    <td class="total">300.00</td>
                    <td>02/10</td>
                </tr>
                <tr>
                    <th>Lara Julianna</th>
                    <td>320.00</td>
                    <td>10%</td>
                    <td>35.00</td>
                    <td class="total">350.00</td>
                    <td>03/10</td>
                </tr>
                <tr>
                    <th>Lucas Brenner</th>
                    <td>90.00</td>
                    <td>23%</td>
                    <td>20.00</td>
                    <td class="total">110.00</td>
                    <td>04/10</td>
                </tr>
                <tr>
                    <th>Lara Julianna</th>
                    <td>70.00</td>
                    <td>43%</td>
                    <td>30.00</td>
                    <td class="total">100.00</td>
                    <td>05/10</td>
                </tr>
                <tr>
                    <th>Maria Arcangela</th>
                    <td>43.00</td>
                    <td>25%</td>
                    <td>10.00</td>
                    <td class="total">53.00</td>
                    <td>05/10</td>
                </tr>
                <tr>
                    <th>Joao Pedro</th>
                    <td>50.00</td>
                    <td>40%</td>
                    <td>20.00</td>
                    <td class="total">70.00</td>
                    <td>08/10</td>
                </tr>
                <tr>
                    <th>Raimundin</th>
                    <td>50.00</td>
                    <td>40%</td>
                    <td>20.00</td>
                    <td class="total">70.00</td>
                    <td>08/10</td>
                </tr>
                <tr>
                    <th>Lucas Brenner</th>
                    <td>600.00</td>
                    <td>20%</td>
                    <td>120.00</td>
                    <td class="total">720.00</td>
                    <td>10/10</td>
                </tr>
                <tr>
                    <th>Lucas Brenner</th>
                    <td>700.00</td>
                    <td>25%</td>
                    <td>175.00</td>
                    <td class="total">875.00</td>
                    <td>10/09</td>
                </tr>
                <tr>
                    <th>Lucas Brenner</th>
                    <td>300.00</td>
                    <td>20%</td>
                    <td>60.00</td>
                    <td class="total">360.00</td>
                    <td>12/09</td>
                </tr>
                <tr>
                    <th>Lara Julianna</th>
                    <td>120.00</td>
                    <td>34%</td>
                    <td>40.00</td>
                    <td class="total">160.00</td>
                    <td>12/09</td>
                </tr>
                <tr>
                    <th>Maria Arcangela</th>
                    <td>110.00</td>
                    <td>25%</td>
                    <td>30.00</td>
                    <td class="total">140.00</td>
                    <td>14/09</td>
                </tr>
                <tr>
                    <th>Lara Julianna</th>
                    <td>100.00</td>
                    <td>20%</td>
                    <td>20.00</td>
                    <td class="total">120.00</td>
                    <td>15/09</td>
                </tr>
                <tr>
                    <th style="background-color: rgba(255, 0, 0, 0.377);">Careca</th>
                    <td>547.00</td>
                    <td>10%</td>
                    <td>54.00</td>
                    <td class="total">-601.00</td>
                    <td>15/09</td>
                </tr>
                <tr>
                    <th>Joao Pedro</th>
                    <td>300.00</td>
                    <td>20%</td>
                    <td>60.00</td>
                    <td class="total">360.00</td>
                    <td>16/09</td>
                </tr>
                <tr>
                    <th>Geovana Claro</th>
                    <td>300.00</td>
                    <td>20%</td>
                    <td>60.00</td>
                    <td class="total">360.00</td>
                    <td>16/09</td>
                </tr>
                <tr>
                    <th>Victor Techfilms</th>
                    <td>200.00</td>
                    <td>30%</td>
                    <td>60.00</td>
                    <td class="total">260.00</td>
                    <td>16/09</td>
                </tr>
                <tr>
                    <th>André Phelipe</th>
                    <td>200.00</td>
                    <td>20%</td>
                    <td>40.00</td>
                    <td class="total">240.00</td>
                    <td>16/09</td>
                </tr>
                <tr>
                    <th>Lucas Brenner</th>
                    <td>260.00</td>
                    <td>20%</td>
                    <td>55.00</td>
                    <td class="total">315.00</td>
                    <td>17/09</td>
                </tr>
                <tr>
                    <th>Lucas Brenner</th>
                    <td>100.00</td>
                    <td>30%</td>
                    <td>30.00</td>
                    <td class="total">130.00</td>
                    <td>17/09</td>
                </tr>
                <tr>
                    <th>Lara Julianna</th>
                    <td>120.00</td>
                    <td>33%</td>
                    <td>40.00</td>
                    <td class="total">160.00</td>
                    <td>17/09</td>
                </tr>
                <tr>
                    <th>Lucas Brenner</th>
                    <td>200.00</td>
                    <td>20%</td>
                    <td>40.00</td>
                    <td class="total">240.00</td>
                    <td>18/09</td>
                </tr>
                <tr>
                    <th>Lara/Pele</th>
                    <td>120.00</td>
                    <td>33%</td>
                    <td>40.00</td>
                    <td class="total">160.00</td>
                    <td>19/09</td>
                </tr>
                <tr>
                    <th>Porcao Amg</th>
                    <td>400.00</td>
                    <td>22%</td>
                    <td>80.00</td>
                    <td class="total">480.00</td>
                    <td>19/09</td>
                </tr>
                <tr>
                    <th style="background-color: rgba(255, 0, 0, 0.377);">Saída Careca</th>
                    <td>323.00</td>
                    <td>10%</td>
                    <td>32.00</td>
                    <td class="total">-355.00</td>
                    <td>20/09</td>
                </tr>
                <tr>
                    <th>Lucas Brenner</th>
                    <td>200.00</td>
                    <td>20%</td>
                    <td>40.00</td>
                    <td class="total">240.00</td>
                    <td>21/09</td>
                </tr>
                <tr>
                    <th>Lara Julianna</th>
                    <td>268.00</td>
                    <td>15%</td>
                    <td>40.00</td>
                    <td class="total">308.00</td>
                    <td>23/09</td>
                </tr>
                <tr>
                    <th>Lara Julianna</th>
                    <td>200.00</td>
                    <td>20%</td>
                    <td>40.00</td>
                    <td class="total">240.00</td>
                    <td>23/09</td>
                </tr>
                <tr>
                    <th>Raylanne Hospital</th>
                    <td>200.00</td>
                    <td>20%</td>
                    <td>40.00</td>
                    <td class="total">240.00</td>
                    <td>23/09</td>
                </tr>
                <tr>
                    <th>Lucas Brenner</th>
                    <td>50.00</td>
                    <td>40%</td>
                    <td>20.00</td>
                    <td class="total">70.00</td>
                    <td>23/09</td>
                </tr>
                <tr>
                    <th>Lucas Amg Victor</th>
                    <td>100.00</td>
                    <td>30%</td>
                    <td>30.00</td>
                    <td class="total">130.00</td>
                    <td>23/09</td>
                </tr>
                <tr>
                    <th>Leandro Amg Lara</th>
                    <td>200.00</td>
                    <td>30%</td>
                    <td>60.00</td>
                    <td class="total">260.00</td>
                    <td>23/09</td>
                </tr>
                <tr>
                    <th>Joao Pedro</th>
                    <td>500.00</td>
                    <td>25%</td>
                    <td>120.00</td>
                    <td class="total">620.00</td>
                    <td>25/09</td>
                </tr>
                <tr>
                    <th>Murilo</th>
                    <td>100.00</td>
                    <td>30%</td>
                    <td>30.00</td>
                    <td class="total">130.00</td>
                    <td>26/09</td>
                </tr>
                <tr>
                    <th>Lucas Brenner</th>
                    <td>300.00</td>
                    <td>22%</td>
                    <td>70.00</td>
                    <td class="total">370.00</td>
                    <td>26/09</td>
                </tr>
                <tr>
                    <th>Mario</th>
                    <td>200.00</td>
                    <td>20%</td>
                    <td>40.00</td>
                    <td class="total">240.00</td>
                    <td>27/09</td>
                </tr>
                <tr>
                    <th>Lucas Brenner</th>
                    <td>180.00</td>
                    <td>22%</td>
                    <td>40.00</td>
                    <td class="total">220.00</td>
                    <td>28/09</td>
                </tr>
                <tr>
                    <th>Lara Julianna</th>
                    <td>250.00</td>
                    <td>20%</td>
                    <td>50.00</td>
                    <td class="total">300.00</td>
                    <td>28/09</td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <th colspan="5">CAPITAL TOTAL</th>
                    <td id="soma"></td>
                </tr>
            </tfoot>
        </table>
    </div>

    <script>
        function searchTable() {
            var input, filter, table, tr, td, i, txtValue;
            input = document.getElementById("searchInput");
            filter = input.value.toUpperCase();
            table = document.querySelector("table");
            tr = table.getElementsByTagName("tr");

            for (i = 0; i < tr.length; i++) {
                td = tr[i].getElementsByTagName("th")[0];
                if (td) {
                    txtValue = td.textContent || td.innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                    } else {
                        tr[i].style.display = "none";
                    }
                }
            }
        }

        let total = document.querySelectorAll('.total');

        let valorFinal = Array.from(total).reduce((acc, item) => acc + parseFloat(item.textContent || item.innerText), 0);

        console.log(valorFinal);

        let soma = document.querySelector('#soma');

        valorFinal = valorFinal.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });

        soma.innerHTML = valorFinal;


    </script>

</body>

</html>