<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emprestimos</title>
</head>
<style>
    body {
        font-family: Arial, Helvetica, sans-serif;
        background-image: linear-gradient(90deg, rgb(45, 45, 206), gray);
        background-position: center center;
        color: black;
        margin: 0;
    }

    #buscador {
        margin-top: 5px;
        text-align: center;
    }

    #searchInput {
        border-radius: 10px;
        padding: 5px;
    }

    #botao {
        padding: 4px;
        cursor: pointer;
    }

    table {
        width: 98%;
        margin: auto;
        border-collapse: collapse;
        position: relative;
        background-color: white;
    }

    thead>tr>th {
        position: sticky;
        top: -1px;
        background-color: gray;
    }

    thead,
    tfoot {
        background-color: gray;
    }

    caption {
        font-weight: bolder;
        font-size: 1.3em;
        padding: 10px;
        color: white;
    }

    tbody tr:nth-child(even) {
        background-color: rgba(128, 128, 128, 0.288);
    }

    th {
        background-color: gray;
        height: 40px;
    }

    th,
    td {
        border: 1px solid black;
        padding: 2px;
        text-align: center;
    }

    #container {
        overflow-x: auto;
        max-height: 690px;
        overflow-y: scroll;
    }

    .saida {
        background-color: rgba(255, 0, 0, 0.377);
    }
</style>

<body>
    <div id="container">
        <div id="buscador">
            <input type="text" id="searchInput" placeholder="Buscar por nome">
            <button id="botao" onclick="searchTable()">Buscar</button>
        </div>
        <table>
            <caption>EMPRÉSTIMOS</caption>
            <thead>
                <tr>
                    <th>NOME</th>
                    <th>CAPITAL</th>
                    <th>%</th>
                    <th>JUROS</th>
                    <th>TOTAL</th>
                    <th>DATA</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th>Lara Julianna</th>
                    <td>100.00</td>
                    <td>20%</td>
                    <td>20.00</td>
                    <td class="total">120.00</td>
                    <td>01/05</td>
                </tr>
                <tr>
                    <th>Lucas Brenner</th>
                    <td>300.00</td>
                    <td>20%</td>
                    <td>60.00</td>
                    <td class="total">360.00</td>
                    <td>01/05</td>
                </tr>
                <tr>
                    <th>Lucas Brenner</th>
                    <td>240.00</td>
                    <td>25%</td>
                    <td>60.00</td>
                    <td class="total">300.00</td>
                    <td>02/05</td>
                </tr>
                <tr>
                    <th>Porcao</th>
                    <td>400.00</td>
                    <td>20%</td>
                    <td>80.00</td>
                    <td class="total">480.00</td>
                    <td>03/05</td>
                </tr>
                <tr>
                    <th>Lara Julianna</th>
                    <td>450.00</td>
                    <td>11%</td>
                    <td>50.00</td>
                    <td class="total">500.00</td>
                    <td>03/05</td>
                </tr>
                <tr>
                    <th>Raylanne Hospital</th>
                    <td>150.00</td>
                    <td>20%</td>
                    <td>30.00</td>
                    <td class="total">180.00</td>
                    <td>04/05</td>
                </tr>
                <tr>
                    <th style="background-color: rgba(255, 0, 0, 0.377);">Saída Careca</th>
                    <td>150.00</td>
                    <td>10%</td>
                    <td>15.00</td>
                    <td class="total">-165.00</td>
                    <td>04/05</td>
                </tr>
                <tr>
                    <th>Lara Julianna</th>
                    <td>70.00</td>
                    <td>43%</td>
                    <td>30.00</td>
                    <td class="total">100.00</td>
                    <td>05/05</td>
                </tr>
                <tr>
                    <th>Maria Arcangela</th>
                    <td>105.00</td>
                    <td>19%</td>
                    <td>20.00</td>
                    <td class="total">125.00</td>
                    <td>05/05</td>
                </tr>
                <tr>
                    <th>Lucas Brenner</th>
                    <td>200.00</td>
                    <td>25%</td>
                    <td>50.00</td>
                    <td class="total">250.00</td>
                    <td>06/05</td>
                </tr>
                <tr>
                    <th>Lucas Brenner</th>
                    <td>700.00</td>
                    <td>25%</td>
                    <td>175.00</td>
                    <td class="total">875.00</td>
                    <td>10/05</td>
                </tr>
                <tr>
                    <th>André Phelipe</th>
                    <td>200.00</td>
                    <td>20%</td>
                    <td>40.00</td>
                    <td class="total">240.00</td>
                    <td>10/05</td>
                </tr>
                <tr>
                    <th style="background-color: rgba(255, 0, 0, 0.377);">Saída Careca</th>
                    <td>550.00</td>
                    <td>9%</td>
                    <td>50.00</td>
                    <td class="total">-600.00</td>
                    <td>12/05</td>
                </tr>
                <tr>
                    <th>Lucas Brenner</th>
                    <td>300.00</td>
                    <td>20%</td>
                    <td>60.00</td>
                    <td class="total">360.00</td>
                    <td>12/05</td>
                </tr>
                <tr>
                    <th>Lara Julianna</th>
                    <td>120.00</td>
                    <td>34%</td>
                    <td>40.00</td>
                    <td class="total">160.00</td>
                    <td>12/04</td>
                </tr>
                <tr>
                    <th>Maria Arcangela</th>
                    <td>120.00</td>
                    <td>25%</td>
                    <td>30.00</td>
                    <td class="total">150.00</td>
                    <td>14/05</td>
                </tr>
                <tr>
                    <th>Leandro amg Lara</th>
                    <td>300.00</td>
                    <td>25%</td>
                    <td>80.00</td>
                    <td class="total">380.00</td>
                    <td>15/05</td>
                </tr>
                <tr>
                    <th>Lara Julianna</th>
                    <td>100.00</td>
                    <td>20%</td>
                    <td>20.00</td>
                    <td class="total">120.00</td>
                    <td>15/05</td>
                </tr>
                <tr>
                    <th>João amg Lara</th>
                    <td>400.00</td>
                    <td>20%</td>
                    <td>80.00</td>
                    <td class="total">480.00</td>
                    <td>15/05</td>
                </tr>
                <tr>
                    <th style="background-color: rgba(255, 0, 0, 0.377);">Saída Careca</th>
                    <td>870.00</td>
                    <td>10%</td>
                    <td>87.00</td>
                    <td class="total">-957.00</td>
                    <td>15/05</td>
                </tr>
                <tr>
                    <th>Mae Lucas Brenner</th>
                    <td>180.00</td>
                    <td>25%</td>
                    <td>45.00</td>
                    <td class="total">225.00</td>
                    <td>16/05</td>
                </tr>
                <tr>
                    <th>Victor Techfilms</th>
                    <td>200.00</td>
                    <td>30%</td>
                    <td>60.00</td>
                    <td class="total">260.00</td>
                    <td>16/05</td>
                </tr>
                <tr>
                    <th>André Phelipe</th>
                    <td>200.00</td>
                    <td>20%</td>
                    <td>40.00</td>
                    <td class="total">240.00</td>
                    <td>16/05</td>
                </tr>
                <tr>
                    <th style="background-color: rgba(255, 0, 0, 0.377);">Saída Luan</th>
                    <td>150.00</td>
                    <td>10%</td>
                    <td>15.00</td>
                    <td class="total">-115.00</td>
                    <td>16/05</td>
                </tr>
                <tr>
                    <th>Lucas Brenner</th>
                    <td>300.00</td>
                    <td>20%</td>
                    <td>60.00</td>
                    <td class="total">360.00</td>
                    <td>17/05</td>
                </tr>
                <tr>
                    <th>Leandro amg lara</th>
                    <td>300.00</td>
                    <td>20%</td>
                    <td>80.00</td>
                    <td class="total">380.00</td>
                    <td>18/04</td>
                </tr>
                <tr>
                    <th>Lucas Brenner</th>
                    <td>200.00</td>
                    <td>20%</td>
                    <td>40.00</td>
                    <td class="total">240.00</td>
                    <td>18/04</td>
                </tr>
                <tr>
                    <th style="background-color: rgba(255, 0, 0, 0.377);">Saída Luan</th>
                    <td>300.00</td>
                    <td>10%</td>
                    <td>30.00</td>
                    <td class="total">-330.00</td>
                    <td>18/04</td>
                </tr>
                <tr>
                    <th>Lara Julianna</th>
                    <td>290.00</td>
                    <td>20%</td>
                    <td>58.00</td>
                    <td class="total">348.00</td>
                    <td>23/04</td>
                </tr>
                <tr>
                    <th>Joao Pedro Conj</th>
                    <td>500.00</td>
                    <td>20%</td>
                    <td>120.00</td>
                    <td class="total">620.00</td>
                    <td>25/04</td>
                </tr>
                <tr>
                    <th>Lucas Brenner</th>
                    <td>300.00</td>
                    <td>22%</td>
                    <td>70.00</td>
                    <td class="total">370.00</td>
                    <td>26/04</td>
                </tr>
                <tr>
                    <th>Lucas Brenner</th>
                    <td>180.00</td>
                    <td>22%</td>
                    <td>40.00</td>
                    <td class="total">220.00</td>
                    <td>28/04</td>
                </tr>
                <tr>
                    <th>Raimundinho</th>
                    <td>100.00</td>
                    <td>30%</td>
                    <td>30.00</td>
                    <td class="total">130.00</td>
                    <td>28/04</td>
                </tr>
                <tr>
                    <th>Lara Julianna</th>
                    <td>250.00</td>
                    <td>20%</td>
                    <td>50.00</td>
                    <td class="total">300.00</td>
                    <td>28/04</td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <th colspan="5">CAPITAL TOTAL</th>
                    <td id="soma"></td>
                </tr>
            </tfoot>
        </table>
    </div>

    <script>
        function searchTable() {
            var input, filter, table, tr, td, i, txtValue;
            input = document.getElementById("searchInput");
            filter = input.value.toUpperCase();
            table = document.querySelector("table");
            tr = table.getElementsByTagName("tr");

            for (i = 0; i < tr.length; i++) {
                td = tr[i].getElementsByTagName("th")[0];
                if (td) {
                    txtValue = td.textContent || td.innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                    } else {
                        tr[i].style.display = "none";
                    }
                }
            }
        }

        let total = document.querySelectorAll('.total');

        let valorFinal = Array.from(total).reduce((acc, item) => acc + parseFloat(item.textContent || item.innerText), 0);

        console.log(valorFinal);

        let soma = document.querySelector('#soma');

        valorFinal = valorFinal.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });

        soma.innerHTML = valorFinal;


    </script>

</body>

</html>